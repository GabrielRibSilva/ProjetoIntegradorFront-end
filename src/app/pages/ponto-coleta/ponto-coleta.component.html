<div class="container mt-4">
  <h1>Gerenciamento de Pontos de Coleta</h1>
  
  <form (ngSubmit)="salvarPontoColeta()" #pontoColetaForm="ngForm">
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input type="text" class="form-control" id="nome" name="nome" [(ngModel)]="pontoColeta.nome" required>
    </div>

    <div class="form-group">
      <label for="endereco">Endereço:</label>
      <input type="text" class="form-control" id="endereco" name="endereco" [(ngModel)]="pontoColeta.endereco" required>
    </div>

    <div class="form-group">
      <label for="bairro">Bairro:</label>
      <select class="form-control" id="bairro" name="bairro" [(ngModel)]="pontoColeta.bairro" required>
        <option value="">Selecione um bairro</option>
        <option *ngFor="let b of bairros" [ngValue]="b">{{ b.nome }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="usuario">Responsável:</label>
      <select class="form-control" id="usuario" name="usuario" [(ngModel)]="pontoColeta.usuario" required>
        <option value="">Selecione um responsável</option>
        <option *ngFor="let u of usuarios" [ngValue]="u">{{ u.nome }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="residuo">Tipo de Resíduo:</label>
      <select class="form-control" id="residuo" name="residuo" [(ngModel)]="pontoColeta.residuo" required>
        <option value="">Selecione um tipo de resíduo</option>
        <option *ngFor="let r of residuos" [ngValue]="r">{{ r.tipo }}</option>
      </select>
    </div>

    <div class="form-group mt-3">
      <button type="submit" class="btn btn-primary" [disabled]="!pontoColetaForm.form.valid">
        {{ pontoColeta.id ? 'Atualizar' : 'Criar' }} Ponto de Coleta
      </button>
      <button type="button" class="btn btn-secondary" (click)="limparFormulario()">
        Cancelar
      </button>
    </div>
  </form>

  <div class="mt-4">
    <h2>Pontos de Coleta Cadastrados</h2>
    <div class="row">
      <div class="col-md-4 mb-3" *ngFor="let p of pontosColeta">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">{{ p.nome }}</h5>
            <p><strong>Endereço:</strong> {{ p.endereco }}</p>
            <p><strong>Tipo de Resíduo:</strong> {{ p.residuo?.tipo }}</p>
            <p><strong>Bairro:</strong> {{ p.bairro?.nome }}</p>
            <p><strong>Responsável:</strong> {{ p.usuario?.nome }}</p>
            <div class="btn-group">
              <button class="btn btn-sm btn-primary" (click)="editarPontoColeta(p)">Editar</button>
              <button class="btn btn-sm btn-danger" (click)="deletarPontoColeta(p.id)">Excluir</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 